var content=(function(){"use strict";var C=Object.defineProperty;var L=(d,a,u)=>a in d?C(d,a,{enumerable:!0,configurable:!0,writable:!0,value:u}):d[a]=u;var c=(d,a,u)=>L(d,typeof a!="symbol"?a+"":a,u);var w,E;const d={matches:["<all_urls>"],main(){if(document.getElementById("cal-companion-sidebar"))return;let e=!1,n=!0;const t=document.createElement("div");t.id="cal-companion-sidebar",t.style.position="fixed",t.style.top="0",t.style.right="0",t.style.width="400px",t.style.height="100vh",t.style.zIndex="2147483647",t.style.backgroundColor="white",t.style.border="1px solid #ccc",t.style.borderTop="none",t.style.borderBottom="none",t.style.boxShadow="-2px 0 10px rgba(0,0,0,0.1)",t.style.transition="transform 0.3s ease-in-out",t.style.transform="translateX(100%)",t.style.display="none";const l=document.createElement("iframe");l.src="http://localhost:8081",l.style.width="100%",l.style.height="100%",l.style.border="none",l.style.borderRadius="0",t.appendChild(l);const r=document.createElement("div");r.id="cal-companion-buttons",r.style.position="fixed",r.style.top="20px",r.style.right="420px",r.style.display="flex",r.style.flexDirection="column",r.style.gap="8px",r.style.zIndex="2147483648",r.style.transition="right 0.3s ease-in-out",r.style.display="none";const i=document.createElement("button");i.innerHTML="◀",i.style.width="40px",i.style.height="40px",i.style.borderRadius="50%",i.style.border="none",i.style.backgroundColor="#3b82f6",i.style.color="white",i.style.cursor="pointer",i.style.fontSize="16px",i.style.boxShadow="0 2px 8px rgba(0,0,0,0.2)",i.style.transition="all 0.2s ease",i.title="Toggle sidebar";const o=document.createElement("button");o.innerHTML="✕",o.style.width="40px",o.style.height="40px",o.style.borderRadius="50%",o.style.border="none",o.style.backgroundColor="rgba(0, 0, 0, 0.5)",o.style.backdropFilter="blur(10px)",o.style.color="white",o.style.cursor="pointer",o.style.fontSize="16px",o.style.boxShadow="0 2px 8px rgba(0,0,0,0.2)",o.style.transition="all 0.2s ease",o.title="Close sidebar",i.addEventListener("mouseenter",()=>{i.style.transform="scale(1.1)"}),i.addEventListener("mouseleave",()=>{i.style.transform="scale(1)"}),o.addEventListener("mouseenter",()=>{o.style.transform="scale(1.1)"}),o.addEventListener("mouseleave",()=>{o.style.transform="scale(1)"}),i.addEventListener("click",()=>{n||(e=!e,e?(t.style.transform="translateX(0)",r.style.right="420px",i.innerHTML="▶"):(t.style.transform="translateX(100%)",r.style.right="20px",i.innerHTML="◀"))}),o.addEventListener("click",()=>{n=!0,e=!1,t.style.display="none",r.style.display="none"}),r.appendChild(i),r.appendChild(o),document.body.appendChild(t),document.body.appendChild(r),chrome.runtime.onMessage.addListener(I=>{I.action==="icon-clicked"&&(n?(n=!1,e=!0,t.style.display="block",r.style.display="flex",t.style.transform="translateX(0)",r.style.right="420px",i.innerHTML="▶"):(e=!e,e?(t.style.transform="translateX(0)",r.style.right="420px",i.innerHTML="▶"):(t.style.transform="translateX(100%)",r.style.right="20px",i.innerHTML="◀")))})}};function a(s){return s}const y=(E=(w=globalThis.browser)==null?void 0:w.runtime)!=null&&E.id?globalThis.browser:globalThis.chrome;function p(s,...e){}const x={debug:(...s)=>p(console.debug,...s),log:(...s)=>p(console.log,...s),warn:(...s)=>p(console.warn,...s),error:(...s)=>p(console.error,...s)},g=class g extends Event{constructor(e,n){super(g.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=n}};c(g,"EVENT_NAME",f("wxt:locationchange"));let b=g;function f(s){var e;return`${(e=y==null?void 0:y.runtime)==null?void 0:e.id}:content:${s}`}function S(s){let e,n;return{run(){e==null&&(n=new URL(location.href),e=s.setInterval(()=>{let t=new URL(location.href);t.href!==n.href&&(window.dispatchEvent(new b(t,n)),n=t)},1e3))}}}const h=class h{constructor(e,n){c(this,"isTopFrame",window.self===window.top);c(this,"abortController");c(this,"locationWatcher",S(this));c(this,"receivedMessageIds",new Set);this.contentScriptName=e,this.options=n,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return y.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,n){const t=setInterval(()=>{this.isValid&&e()},n);return this.onInvalidated(()=>clearInterval(t)),t}setTimeout(e,n){const t=setTimeout(()=>{this.isValid&&e()},n);return this.onInvalidated(()=>clearTimeout(t)),t}requestAnimationFrame(e){const n=requestAnimationFrame((...t)=>{this.isValid&&e(...t)});return this.onInvalidated(()=>cancelAnimationFrame(n)),n}requestIdleCallback(e,n){const t=requestIdleCallback((...l)=>{this.signal.aborted||e(...l)},n);return this.onInvalidated(()=>cancelIdleCallback(t)),t}addEventListener(e,n,t,l){var r;n==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(r=e.addEventListener)==null||r.call(e,n.startsWith("wxt:")?f(n):n,t,{...l,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),x.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:h.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){var r,i,o;const n=((r=e.data)==null?void 0:r.type)===h.SCRIPT_STARTED_MESSAGE_TYPE,t=((i=e.data)==null?void 0:i.contentScriptName)===this.contentScriptName,l=!this.receivedMessageIds.has((o=e.data)==null?void 0:o.messageId);return n&&t&&l}listenForNewerScripts(e){let n=!0;const t=l=>{if(this.verifyScriptStartedEvent(l)){this.receivedMessageIds.add(l.data.messageId);const r=n;if(n=!1,r&&(e!=null&&e.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",t),this.onInvalidated(()=>removeEventListener("message",t))}};c(h,"SCRIPT_STARTED_MESSAGE_TYPE",f("wxt:content-script-started"));let v=h;function M(){}function m(s,...e){}const T={debug:(...s)=>m(console.debug,...s),log:(...s)=>m(console.log,...s),warn:(...s)=>m(console.warn,...s),error:(...s)=>m(console.error,...s)};return(async()=>{try{const{main:s,...e}=d,n=new v("content",e);return await s(n)}catch(s){throw T.error('The content script "content" crashed on startup!',s),s}})()})();
content;